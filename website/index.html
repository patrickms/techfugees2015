<html>
<head>

<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
<style>
  .table-row {
    border-style: groove;
    width:100%;
  }
</style>
<script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>
  var tableRowPrototype='<div class="table-row">\n'+
    '<div class = "pure-u-1-4">\n'+
      'Answer:  <div onclick="answerEnglish(\'$ID\', \'$USER\')" class = "pure-button">en</div> &nbsp;\n'+
      '<div onclick="answerNative(\'$ID\', \'$USER\')" class = "pure-button">$NATIVE_LANG</div><br>\n'+
    '</div>\n'+
    '<div class = "pure-u-3-4">\n'+
      '$ENGLISH_QUESTION<br>\n'+
      '$NATIVE_QUESTION<br>\n'+
      '$ENGLISH_ANSWER<br>\n'+
      '$NATIVE_ANSWER\n'+
    '</div>\n'+
  '</div>\n';
  
  function getSpeechLanguage(lang)
  {
  var speechLanguages={ "en":"en-US", "es":"es-US", "zh":"zh-CN", "ar":"ar-AE" };
  	return speechLanguages[lang];
  }
  function getTranslationLanguage(lang)
  {
    var translateLanguages={ "en":"en", "es":"es", "zh":"zh-CHS", "ar":"ar" };
  	return translateLanguages[lang];
  }
  function getLanguageName(lang)
  {
    var languageNames={ "en":"English", "es":"español", "zh":"中文", "ar":"العربية" };
  	return languageNames[lang];
  }
  
  var firebaseRoot = new Firebase("https://techfugees2015.firebaseio.com/");
  var allQuestions = firebaseRoot.child("allQuestions");
  allQuestions.on("value", function(data){updateGrid(data.val)});
  
  function updateGrid(data)
  {
    var keys = [],
    k, i, len;
  
    for (k in data) {
      if (myObj.hasOwnProperty(k)) {
        keys.push(k);
      }
    }
    
    function descending(x, y)
    {
      if(x<y)
        return 1;
      else if(x>y)
        return -1;
      else
        return 0;
    }
    
    keys.sort(descending);
    
    len = keys.length;
    
    html = ""
    for (i = 0; i < len; i++) {
      k = keys[i];
      row=data[k];
      rowHTML=tableRowPrototype;
      rowHTML=rowHTML.replace("$ID",k);
      rowHTML=rowHTML.replace("$USER",row.user);
      rowHTML=rowHTML.replace("$ENGLISH_QUESTION",row.englishquestion || "<No English question>");
      rowHTML=rowHTML.replace("$NATIVE_QUESTION",row.nativequestion || "<No native language question>");
      rowHTML=rowHTML.replace("$ENGLISH_ANSWER",row.englishanswer ||"<No English answer>");
      rowHTML=rowHTML.replace("$NATIVE_ANSWER",row.nativeanswer ||"<No native language answer>");
      rowHTML=rowHTML.replace("$NATIVE_LANG",row.nativelanguage ||"<Language unknown>");
    }
  }
</script>
</head>
<body>
  <div class="pure-menu pure-menu-horizontal" style="height:10%;width:100%;background-color:coral;text-align:center">
    <span style="font-size:200%">Help out by answering questions</span>
    <ul class="pure-menu-list">
        <li class="pure-menu-item"><a href="#" class="pure-menu-link">News</a></li>
        <li class="pure-menu-item"><a href="#" class="pure-menu-link">Sports</a></li>
        <li class="pure-menu-item"><a href="#" class="pure-menu-link">Finance</a></li>
    </ul>
</div>
<div class="pure-g" style="width:100%;border-style: double;">
  <div class="table-row">
    <div class = "pure-u-1-4">
      Answer:  <div onclick="answerEnglish('$ID','$USER')" class = "pure-button">en</div> &nbsp; <div onclick="answerNative('$ID','$USER')" class = "pure-button">$NATIVE_LANG</div><br>
    </div>
    <div class = "pure-u-3-4">
      $ENGLISH_QUESTION<br>
      $NATIVE_QUESTION<br>
      $ENGLISH_ANSWER<br>
      $NATIVE_ANSWER
    </div>
  </div>
</div>
</body>
</html>
